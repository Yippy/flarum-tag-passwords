{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@datlechin/flarum-tag-passwords/webpack/bootstrap","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/compat get default export","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/define property getters","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/hasOwnProperty shorthand","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/make namespace object","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['forum/app']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/extend']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/models/Tag']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/Model']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/components/TagLinkButton']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@datlechin/flarum-tag-passwords/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@datlechin/flarum-tag-passwords/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/Component']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/Button']\"","webpack://@datlechin/flarum-tag-passwords/./src/forum/components/TagPasswordRequired.js","webpack://@datlechin/flarum-tag-passwords/./src/forum/components/TagGroupRequired.js","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/common/helpers/tagIcon']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/common/utils/sortTags']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/textContrastClass']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/Link']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@datlechin/flarum-tag-passwords/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/models/Tag'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/TagLinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\n\nexport default class TagPasswordRequired extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.password = Stream('');\n    this.loading = false;\n    this.invalid = false;\n\n    this.tag = this.attrs.currentTag;\n  }\n\n  view() {\n    return (\n      <div className=\"TagPasswordRequired\">\n        <form onsubmit={this.onsubmit.bind(this)}>\n          <div className=\"Form-group\">\n            <h3>{app.translator.trans('datlechin-tag-passwords.forum.tag_password_required.title')}</h3>\n            <input className={'FormControl' + (this.invalid ? ' invalid' : '')} bidi={this.password} disabled={this.loading} />\n          </div>\n          <Button type=\"submit\" className=\"Button Button--primary\" loading={this.loading}>\n            {app.translator.trans('datlechin-tag-passwords.forum.tag_password_required.button_submit')}\n          </Button>\n        </form>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n    this.invalid = false;\n\n    app\n      .request({\n        url: app.forum.attribute('apiUrl') + '/datlechin/tag-passwords/auth',\n        method: 'POST',\n        body: {\n          data: {\n            id: this.tag.id(),\n            password: this.password,\n          },\n        },\n      })\n      .then((result) => {\n        this.tag.pushAttributes({ isUnlocked: true });\n        this.loading = false;\n        this.invalid = false;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.invalid = true;\n        this.loading = false;\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\n\nexport default class TagGroupRequired extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.group = Stream('');\n    this.loading = false;\n    this.invalid = false;\n\n    this.tag = this.attrs.currentTag;\n  }\n\n  view() {\n    return (\n      <div className=\"TagGroupRequired\">\n        <form onsubmit={this.onsubmit.bind(this)}>\n          <div className=\"Form-group\">\n            <h3>{app.translator.trans('datlechin-tag-passwords.forum.tag_group_required.title')}</h3>\n          </div>\n          <Button type=\"submit\" className=\"Button Button--primary\" loading={this.loading}>\n            {app.translator.trans('datlechin-tag-passwords.forum.tag_password_required.button_submit')}\n          </Button>\n        </form>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n    this.invalid = false;\n\n    app\n      .request({\n        url: app.forum.attribute('apiUrl') + '/datlechin/tag-passwords/auth',\n        method: 'POST',\n        body: {\n          data: {\n            id: this.tag.id(),\n          },\n        },\n      })\n      .then((result) => {\n        this.tag.pushAttributes({ isUnlocked: true });\n        this.loading = false;\n        this.invalid = false;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.invalid = true;\n        this.loading = false;\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/TagsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/common/helpers/tagIcon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/common/utils/sortTags'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/textContrastClass'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport Tag from 'flarum/tags/models/Tag';\nimport Model from 'flarum/common/Model';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport TagLinkButton from 'flarum/tags/components/TagLinkButton';\nimport icon from 'flarum/common/helpers/icon';\nimport TagPasswordRequired from './components/TagPasswordRequired';\nimport TagGroupRequired from './components/TagGroupRequired';\n\nimport TagsPage from 'flarum/tags/components/TagsPage';\nimport tagIcon from 'flarum/tags/common/helpers/tagIcon';\nimport sortTags from 'flarum/tags/common/utils/sortTags';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport Link from 'flarum/common/components/Link';\nimport humanTime from 'flarum/common/helpers/humanTime';\n\napp.initializers.add('datlechin/flarum-tag-passwords', () => {\n  Tag.prototype.isPasswordProtected = Model.attribute('isPasswordProtected');\n  Tag.prototype.isGroupProtected = Model.attribute('isGroupProtected');\n  Tag.prototype.isUnlocked = Model.attribute('isUnlocked');\n  Tag.prototype.password = Model.attribute('password');\n  Tag.prototype.isLockedIconDisplayed = Model.attribute('isLockedIconDisplayed');\n  Tag.prototype.isProtectedTagDisplayedForSidebar = Model.attribute('isProtectedTagDisplayedForSidebar');\n  Tag.prototype.isProtectedTagDisplayedForTagsPage = Model.attribute('isProtectedTagDisplayedForTagsPage');\n\n  extend(IndexPage.prototype, 'view', function (vdom) {\n    const tag = this.currentTag();\n\n    if (tag && !tag.isUnlocked()) {\n      if (tag.isGroupProtected()) {\n        vdom.children[1].children[0].children[1].children = [TagGroupRequired.component({ currentTag: tag })];\n      } else if (tag.isPasswordProtected()) {\n        vdom.children[1].children[0].children[1].children = [TagPasswordRequired.component({ currentTag: tag })];\n      }\n    }\n  });\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    const tag = this.currentTag();\n\n    if (tag && (tag.isPasswordProtected() || tag.isGroupProtected()) && !tag.isUnlocked()) {\n      const item = items.get('newDiscussion');\n\n      item.children = app.translator.trans('core.forum.index.cannot_start_discussion_button');\n      item.attrs.disabled = true;\n    }\n  });\n\n  extend(TagLinkButton.prototype, 'view', function (vdom) {\n    const tag = this.attrs.model;\n\n    if (tag.isPasswordProtected()) {\n      if (tag.isUnlocked()) {\n        if (tag.isLockedIconDisplayed() == true) {\n          vdom.children.push(icon('fas fa-unlock'));\n        }\n      } else if (tag.isProtectedTagDisplayedForSidebar() == true) {\n        vdom.children.push(icon('fas fa-lock'));\n      } else {\n        vdom.attrs.className += ' hiddenTag';\n      }\n    }\n    if (tag.isGroupProtected()) {\n      if (tag.isUnlocked()) {\n        if (tag.isLockedIconDisplayed() == true) {\n          vdom.children.push(icon('fas fa-unlock'));\n        }\n      } else if (tag.isProtectedTagDisplayedForSidebar() == true) {\n        vdom.children.push(icon('fas fa-user-lock'));\n      } else {\n        vdom.attrs.className += ' hiddenTag';\n      }\n    }\n  });\n\n  override(TagsPage.prototype, 'tagTileView', function (original, ...args) {\n    if (args.length > 0 && args[0] instanceof Tag) {\n      const tag = args[0];\n      if (tag.isGroupProtected() || tag.isPasswordProtected()) {\n        if (tag.isUnlocked()) {\n          return original(...args);\n         } else if (tag.isProtectedTagDisplayedForTagsPage() == true) {\n          const children = sortTags(tag.children() || []);\n  \n          return (\n            <li className={classList('TagTile', { colored: tag.color() }, textContrastClass(tag.color()))} style={{ '--tag-bg': tag.color() }}>\n              <Link className=\"TagTile-info\" href={app.route.tag(tag)}>\n                {tag.icon() && tagIcon(tag, {}, { useColor: false })}\n                {tag.isGroupProtected()? <div class=\"TagsPageGroupProtection\"></div>: <div class=\"TagsPagePasswordProtection\"></div>}\n                <h3 className=\"TagTile-name\">{tag.name()}</h3>\n               \n                <p className=\"TagTile-description\">{tag.description()}</p>\n                {!!children && (\n                  <div className=\"TagTile-children\">{children.map((child) => [<Link href={app.route.tag(child)}>{child.name()}</Link>, ' '])}</div>\n                )}\n              </Link>\n  \n              <span className=\"TagTile-lastPostedDiscussion\">\n                {\n                  tag.isGroupProtected()?\n                  ( <div>{icon('fas fa-user-lock')} {app.translator.trans('datlechin-tag-passwords.forum.tags_page.group_protected')}</div>):\n                  ( <div>{icon('fas fa-lock')} {app.translator.trans('datlechin-tag-passwords.forum.tags_page.password_protected')}</div>)\n                }\n              </span>\n            </li>\n          );\n        } else {\n          return '';\n        }\n      } else {\n        return original(...args);\n      }\n    } else {\n      return original(...args);\n    }\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","TagPasswordRequired","_Component","apply","arguments","_proto","oninit","vnode","this","password","Stream","loading","invalid","tag","attrs","currentTag","view","m","className","onsubmit","bind","app","bidi","disabled","Button","type","e","_this","preventDefault","url","method","body","data","id","then","result","pushAttributes","isUnlocked","redraw","error","Component","TagGroupRequired","group","Tag","Model","extend","IndexPage","vdom","isGroupProtected","children","component","isPasswordProtected","items","item","TagLinkButton","model","isLockedIconDisplayed","push","icon","isProtectedTagDisplayedForSidebar","override","TagsPage","original","_len","length","args","Array","_key","isProtectedTagDisplayedForTagsPage","sortTags","classList","colored","color","textContrastClass","style","Link","href","tagIcon","useColor","class","name","description","map","child"],"sourceRoot":""}