{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,IACzBH,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,mB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAzC,SAASC,EAAgBhB,EAAGiB,GAKzC,OAJAD,EAAkBf,OAAOiB,eAAiBjB,OAAOiB,eAAeC,OAAS,SAAyBnB,EAAGiB,GAEnG,OADAjB,EAAEoB,UAAYH,EACPjB,CACT,EACOgB,EAAgBhB,EAAGiB,EAC5B,CCLe,SAASI,EAAeC,EAAUC,GAC/CD,EAASf,UAAYN,OAAOuB,OAAOD,EAAWhB,WAC9Ce,EAASf,UAAUkB,YAAcH,EACjCJ,EAAeI,EAAUC,EAC3B,CCLA,MAAM,EAA+BV,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCKnCW,EAAmB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KAAAR,EAAAK,EAAAC,GAAA,IAAAG,EAAAJ,EAAAnB,UAsDrC,OAtDqCuB,EACtCC,OAAA,SAAOC,GACLL,EAAApB,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAKC,SAAWC,IAAO,IACvBF,KAAKG,SAAU,EACfH,KAAKI,SAAU,EAEfJ,KAAKK,IAAML,KAAKM,MAAMC,UACxB,EAACV,EAEDW,KAAA,WACE,OACEC,EAAA,OAAKC,UAAU,uBACbD,EAAA,QAAME,SAAUX,KAAKW,SAASzB,KAAKc,OACjCS,EAAA,OAAKC,UAAU,cACbD,EAAA,UAAKG,IAAAA,WAAeC,MAAM,8DAC1BJ,EAAA,SAAOC,UAAW,eAAiBV,KAAKI,QAAU,WAAa,IAAKU,KAAMd,KAAKC,SAAUc,SAAUf,KAAKG,WAE1GM,EAACO,IAAM,CAACC,KAAK,SAASP,UAAU,yBAAyBP,QAASH,KAAKG,SACpES,IAAAA,WAAeC,MAAM,uEAKhC,EAAChB,EAEDc,SAAA,SAASO,GAAG,IAAAC,EAAA,KACVD,EAAEE,iBAEFpB,KAAKG,SAAU,EACfH,KAAKI,SAAU,EAEfQ,IAAAA,QACW,CACPS,IAAKT,IAAAA,MAAUU,UAAU,UAAY,gCACrCC,OAAQ,OACRC,KAAM,CACJC,KAAM,CACJC,GAAI1B,KAAKK,IAAIqB,KACbzB,SAAUD,KAAKC,aAIpB0B,MAAK,SAACC,GACLT,EAAKd,IAAIwB,eAAe,CAAEC,YAAY,IACtCX,EAAKhB,SAAU,EACfgB,EAAKf,SAAU,EACfK,EAAEsB,QACJ,IAAE,OACK,SAACC,GACNb,EAAKf,SAAU,EACfe,EAAKhB,SAAU,CACjB,GACJ,EAACV,CAAA,CAtDqC,CAASwC,KCA5BC,EAAgB,SAAAxC,GAAA,SAAAwC,IAAA,OAAAxC,EAAAC,MAAA,KAAAC,YAAA,KAAAR,EAAA8C,EAAAxC,GAAA,IAAAG,EAAAqC,EAAA5D,UAmDlC,OAnDkCuB,EACnCC,OAAA,SAAOC,GACLL,EAAApB,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAKG,SAAU,EACfH,KAAKI,SAAU,EAEfJ,KAAKK,IAAML,KAAKM,MAAMC,UACxB,EAACV,EAEDW,KAAA,WACE,OACEC,EAAA,OAAKC,UAAU,oBACbD,EAAA,QAAME,SAAUX,KAAKW,SAASzB,KAAKc,OACjCS,EAAA,OAAKC,UAAU,cACbD,EAAA,UAAKG,IAAAA,WAAeC,MAAM,4DAE5BJ,EAACO,IAAM,CAACC,KAAK,SAASP,UAAU,yBAAyBP,QAASH,KAAKG,SACpES,IAAAA,WAAeC,MAAM,uEAKhC,EAAChB,EAEDc,SAAA,SAASO,GAAG,IAAAC,EAAA,KACVD,EAAEE,iBAEFpB,KAAKG,SAAU,EACfH,KAAKI,SAAU,EAEfQ,IAAAA,QACW,CACPS,IAAKT,IAAAA,MAAUU,UAAU,UAAY,gCACrCC,OAAQ,OACRC,KAAM,CACJC,KAAM,CACJC,GAAI1B,KAAKK,IAAIqB,SAIlBC,MAAK,SAACC,GACLT,EAAKd,IAAIwB,eAAe,CAAEC,YAAY,IACtCX,EAAKhB,SAAU,EACfgB,EAAKf,SAAU,EACfK,EAAEsB,QACJ,IAAE,OACK,SAACC,GACNb,EAAKf,SAAU,EACfe,EAAKhB,SAAU,CACjB,GACJ,EAAC+B,CAAA,CAnDkC,CAASD,KCL9C,MAAM,EAA+BrD,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,mC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,yB,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,wB,eCOzC,SAASqD,GAAS9B,EAAKC,EAAY8B,EAA+BC,QAAtC,IAAL/B,IAAAA,EAAQ,CAAC,QAAyB,IAAtB8B,IAAAA,GAAyB,QAA6B,IAAvBC,IAAAA,GAA0B,GACzG/B,EAAMgC,MAAQhC,EAAMgC,OAAS,CAAC,EAC9BhC,EAAMI,UAAY,aAAeJ,EAAMI,WAAa,IAEpD,IAAM6B,EAAOC,KAAQlC,EAAO,QACtBmC,EAAUpC,EAAMA,EAAIqC,OAAS9B,IAAI+B,WAAW9B,MAAM,oCAExD,GAAIR,EAAK,CACP,IAAMuC,EAAQvC,EAAIuC,QACdA,IACFtC,EAAMgC,MAAM,YAAcM,EAC1BtC,EAAMI,UAAYmC,IAAUvC,EAAMI,UAAW,UAAWoC,IAAkBF,KAGxEL,IACFjC,EAAMyC,MAAQ1C,EAAI2C,eAAiB,GACnC1C,EAAM2C,KAAOrC,IAAIsC,MAAM,MAAO,CAAEC,KAAM9C,EAAI+C,UAGxC/C,EAAIgD,YACN/C,EAAMI,WAAa,mBAEvB,MACEJ,EAAMI,WAAa,YAGrB,IAAI4C,EAAa,KACjB,GAAIjD,EAAIkD,uBAAyBlD,EAAImD,mBACnC,GAAInD,EAAIyB,aAAc,CACpB,IAAKO,EACH,OAAO5B,EAAAgD,IAAA,MACEpD,EAAIqD,0BACbJ,EAAaK,IAAK,gBAAiB,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,UAE3E,KAAO,KAAIzB,EAOT,OAAO3B,EAAAgD,IAAA,MALLH,EADEjD,EAAIkD,sBACOI,IAAK,cAAe,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,UAExDF,IAAK,mBAAoB,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,SAI9E,MACK,IAAKxB,EACV,OAAO5B,EAAAgD,IAAA,MAET,OAAOhD,EACL8B,EAAOuB,IAAO,OACdxD,EACAG,EAAA,QAAMC,UAAU,iBACbL,GAAOA,EAAIsD,QAAUI,IAAQ1D,EAAK,CAAEK,UAAW,iBAAmB,CAAEsD,UAAU,IAC/EvD,EAAA,QAAMC,UAAU,iBACb+B,GAAWa,EAAa,IAAM,IAC9BA,GAAc,OAIvB,C,gBC5De,SAASW,GAAUd,EAAM7C,EAAY4D,EAA6B7B,QAApC,IAAL/B,IAAAA,EAAQ,CAAC,QAAuB,IAApB4D,IAAAA,GAAuB,QAA6B,IAAvB7B,IAAAA,GAA0B,GACzG,IAAM8B,EAAW,GACjBC,EAAgC9D,EAAxBiC,EAAI6B,EAAJ7B,KAAS8B,ECNJ,SAAuCC,EAAQC,GAC5D,GAAc,MAAVD,EAAgB,MAAO,CAAC,EAC5B,IAAIE,EAAS,CAAC,EACd,IAAK,IAAI1G,KAAOwG,EACd,GAAItG,OAAOM,UAAUC,eAAeC,KAAK8F,EAAQxG,GAAM,CACrD,GAAIyG,EAASE,QAAQ3G,IAAQ,EAAG,SAChC0G,EAAO1G,GAAOwG,EAAOxG,EACvB,CAEF,OAAO0G,CACT,CDJ6BE,CAAAN,EAAAO,IAc3B,OAZAN,EAAW3D,UAAYmC,IAAU,YAAawB,EAAW3D,WAErDyC,EACFyB,IAASzB,GAAM0B,SAAQ,SAACxE,IAClBA,GAAuB,IAAhB8C,EAAK2B,SACdX,EAASY,KAAK5C,GAAS9B,EAAK,CAAEkC,KAAAA,GAAQ2B,EAAsB7B,GAEhE,IAEA8B,EAASY,KAAK5C,MAGT1B,EAAA,OAAU4D,EAAaF,EAChC,CEVA,SAASa,GAAwBC,EAAYlC,EAAOmC,EAAS3B,EAAqBC,GAChF,OACE/C,EAAC0E,IAAO,CAACC,KAAMF,EAASG,SAAS,UAC/B5E,EAAA,OAAKC,UAAU,2BACbD,EAAA,MAAIC,UAAU,4BACX6C,EAAsBI,IAAK,eAAiBlD,EAAAgD,IAAA,MAC5CD,EAAmBG,IAAK,oBAAsBlD,EAAAgD,IAAA,MAC9C,IAAMV,GAERkB,GAAUgB,EAAW9B,OAAQ,CAAC,GAAG,GAAM,GACxC1C,EAAA,MAAI6E,MAAM,2BACR7E,EAAA,MAAI6E,MAAM,aAAarB,GAAUgB,EAAW9B,OAAQ,CAAC,GAAG,MAKlE,CAAC,IAEoBoC,GAA8B,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAA7F,MAAA,KAAAC,YAAA,KAAAR,EAAAmG,EAAAC,GAAA,IAAA3F,EAAA0F,EAAAjH,UAuGhD,OAvGgDuB,EACjDW,KAAA,WACE,IAAMyE,EAAajF,KAAKM,MAAM2E,WAIxB3E,GAHO2E,EAAW9B,OAEPsC,IAAAA,SAA4BR,EAAYjF,MAAM0F,UACjD1F,KAAK2F,gBAEnB,OAAI3F,KAAKM,MAAMsF,OAAOC,qCACbpF,EAAA,MAASH,EAAQN,KAAK8F,eAEtBrF,EAAA,WAEX,EAACZ,EACDkG,iBAAA,SAAiBC,GACf,OAAOvF,EAAA,OAAKC,UAAU,YAAYsF,EAAMC,KAAI,SAAC5F,GAAG,MAAK,CAAC8B,SAAS9B,EAAKA,EAAI6F,qCAAsC,CAAE3D,MAAM,IAAS,IAAI,IACrI,EAAC1C,EAEDiG,YAAA,WACE,IAAMb,EAAajF,KAAKM,MAAM2E,WACxBkB,EAAWlB,EAAWkB,WACtBC,EAASnB,EAAWmB,SAE1B,OACE3F,EAAA,OAAKC,UAAWmC,IAAU,6BAA8B,mBAAoB,CAAEwD,OAAQF,EAAUG,KAAMF,KACnGpG,KAAKuG,mBACLvG,KAAKwG,aACLxG,KAAKyG,WACLzG,KAAK0G,iBAGZ,EAAC7G,EAED4G,SAAA,WACE,IAAMxB,EAAajF,KAAKM,MAAM2E,WAGxB0B,GAFS3G,KAAK4G,YAEY3B,EAAW4B,wBAAwB/B,OAAS,GACtEgC,EAAiC7B,EAAW8B,+BAA+BjC,OAAS,EAC1F,OAAI6B,IAA4BG,EAE5BrG,EAACqD,IAAI,CAACpD,UAAU,0BAA0BuC,KAAK,KAC5C+B,GACCC,EACArE,IAAAA,WAAeC,MAAM,0EACrBD,IAAAA,WAAeC,MAAM,yEACrB8F,EACAG,KAIIH,GAA2BG,EAEnCrG,EAACqD,IAAI,CAACpD,UAAU,0BAA0BuC,KAAK,KAC5C+B,GACCC,EACArE,IAAAA,WAAeC,MAAM,uEACrBD,IAAAA,WAAeC,MAAM,sEACrB8F,EACAG,IAMJrG,EAACqD,IAAI,CAACpD,UAAU,0BAA0BuC,KAAK,KAC5C+B,GACCC,EACArE,IAAAA,WAAeC,MAAM,gEACrBD,IAAAA,WAAeC,MAAM,+DACrB8F,EACAG,GAKV,EAACjH,EAED0G,iBAAA,WACE,IAAMtB,EAAajF,KAAKM,MAAM2E,WAC9B,GAAIjF,KAAKM,MAAMsF,OAAOoB,wBAAyB,CAC7C,IAAMC,EAAOhC,EAAWgC,OACxB,OACExG,EAAC0E,IAAO,CACNC,KAAMxE,IAAAA,WAAeC,MAAM,0CAA2C,CAAEoG,KAAAA,EAAMC,IAAKC,IAAUlC,EAAWmC,eACxG/B,SAAS,SAET5E,EAACqD,IAAI,CAACpD,UAAU,4BAA4BuC,KAAMgE,EAAOrG,IAAAA,MAAUqG,KAAKA,GAAQ,KAC7EI,KAAOJ,GAAQ,KAAM,CAAElE,MAAO,MAIvC,CACE,OACEtC,EAAC0E,IAAO,CAACC,KAAMxE,IAAAA,WAAeC,MAAM,0CAA2C,CAAEqG,IAAKC,IAAUlC,EAAWmC,eAAiB/B,SAAS,SACnI5E,EAACqD,IAAI,CAACpD,UAAU,4BAA4BuC,KAAK,KAC/CxC,EAAA,QAAM6E,MAAM,SAASnF,QAAQ,QAC1BwD,IAAK,qBAMlB,EAAC4B,CAAA,CAvGgD,CAAS+B,KC7B5D,MAAM,GAA+B1I,OAAOC,KAAKC,OAAO,yB,eC8BxD,SAASyI,GAAmBC,EAAMC,EAAYC,EAAgBC,GAC5DH,EAAKrD,SAASU,SAAQ,SAAC+C,GACrB,GAAIA,EAAMtH,MAAMI,YAA4E,IAA/DkH,EAAMtH,MAAMI,UAAU+D,QAAQgD,EAAWC,IAEpE,OADAA,GAAkB,IACID,EAAW3C,YAE/B8C,EAAMzD,SAAWwD,GAGZJ,GAAmBK,EAAOH,EAAYC,EAAgBC,EAEjE,GACF,CAEA,SAASE,GAAgBL,EAAMnH,EAAKyH,EAAaC,GAC3CD,IACEzH,EAAIyB,aACFzB,EAAIqD,yBACN8D,EAAKrD,SAASY,KAAKpB,IAAK,kBAEjBtD,EAAI2H,oCACbR,EAAKrD,SAASY,KAAKgD,GAEnBP,EAAKlH,MAAMI,WAAa,aAG9B,CA2FA,SAASuH,KAIP,IAKI9H,EALE+H,EAAQlI,KAAKM,MAAM4H,MAEnBtC,EAASsC,EAAMC,YACfC,EAAYF,EAAMG,oBAAsBH,EAAMI,gBAcpD,GAVIF,EACFjI,EAAUM,EAAC8H,IAAgB,MAClBL,EAAMM,YACfrI,EACEM,EAACO,IAAM,CAACN,UAAU,SAAS+H,QAASP,EAAMQ,SAASxJ,KAAKgJ,IACrDtH,IAAAA,WAAeC,MAAM,iDAKxBqH,EAAMS,UAAW,CACnB,IAAMvD,EAAOxE,IAAAA,WAAeC,MAAM,yCAClC,OACEJ,EAAA,OAAKC,UAAU,kBACbD,EAACmI,IAAW,CAACxD,KAAMA,IAGzB,CAEA,IAAMyD,EAAWX,EAAMW,SACvB,OACEpI,EAAA,OAAKC,UAAWmC,IAAU,iBAAkB,CAAE,gCAAiCqF,EAAMY,qBACnFrI,EAAA,MAAIsI,KAAK,OAAO,YAAWX,EAAW1H,UAAU,8BAC7CwH,EAAMc,WAAW/C,KAAI,SAACgD,EAAIC,GACzB,OAAOD,EAAGE,MAAMlD,KAAI,SAAChB,EAAYmE,GAAO,OA/DlD,SAAmCnE,EAAYiE,EAASL,EAAUO,EAASxD,GACzE,OAAIX,EAAWoE,wBAA0B,GACvCzD,EAAOC,qCAAuCjF,IAAAA,MAAUU,UAAU,6DAClEsE,EAAOoB,wBAA0BpG,IAAAA,MAAUU,UAAU,gDACrDsE,EAAO0D,uBAAyB1I,IAAAA,MAAUU,UAAU,+CAElDb,EAAA,MAAI3C,IAAK,EAAG,UAAS,EAAGiL,KAAK,UAAU,eAAa,KAAK,gBAAeG,EAAUL,EAAWO,GAC3F3I,EAAC8E,GAA8B,CAACN,WAAYA,EAAYW,OAAQA,MAKlEnF,EAAA,MAAI3C,IAAKmH,EAAWvD,KAAM,UAASuD,EAAWvD,KAAMqH,KAAK,UAAU,eAAa,KAAK,gBAAeG,EAAUL,EAAWO,GACvH3I,EAAC6G,IAAkB,CAACrC,WAAYA,EAAYW,OAAQA,IAI5D,CA8CuD2D,CAA0BtE,EAAYiE,EAASL,EAAUO,EAASxD,EAAO,GACxH,KAEFnF,EAAA,OAAKC,UAAU,2BAA2BP,GAGhD,CAEAS,IAAAA,aAAiB4I,IAAI,kCAAkC,WACrDC,IAAAA,UAAclG,oBAAsBmG,IAAAA,UAAgB,uBACpDD,IAAAA,UAAcjG,iBAAmBkG,IAAAA,UAAgB,oBACjDD,IAAAA,UAAc3H,WAAa4H,IAAAA,UAAgB,cAC3CD,IAAAA,UAAcxJ,SAAWyJ,IAAAA,UAAgB,YACzCD,IAAAA,UAAc/F,sBAAwBgG,IAAAA,UAAgB,yBACtDD,IAAAA,UAAczB,kCAAoC0B,IAAAA,UAAgB,qCAClED,IAAAA,UAAcvD,mCAAqCwD,IAAAA,UAAgB,sCACnEC,IAAAA,UAAqB9C,sBAAwB6C,IAAAA,UAAgB,yBAC7DC,IAAAA,UAAqB5C,6BAA+B2C,IAAAA,UAAgB,gCACpEC,IAAAA,UAAqBN,sBAAwBK,IAAAA,UAAgB,0BAE7DE,EAAAA,EAAAA,QAAOC,IAAAA,UAAqB,QAAQ,SAAUrC,GAC5C,IAAMnH,EAAML,KAAKO,aACbF,IAAQA,EAAIyB,eACVzB,EAAImD,mBACN+D,GAAmBC,EAAM,CAAC,YAAa,mBAAoB,qBAAsB,EAAG,CAACtF,EAAiB4H,UAAU,CAAEvJ,WAAYF,MACrHA,EAAIkD,uBACbgE,GAAmBC,EAAM,CAAC,YAAa,mBAAoB,qBAAsB,EAAG,CAAC/H,EAAoBqK,UAAU,CAAEvJ,WAAYF,MAGvI,KAEA0J,EAAAA,EAAAA,UAASC,IAAAA,UAA0B,OAAQ/B,KAE3C2B,EAAAA,EAAAA,QAAOC,IAAAA,UAAqB,gBAAgB,SAAUV,GACpD,IAAM9I,EAAML,KAAKO,aAEjB,GAAIF,IAAQA,EAAIkD,uBAAyBlD,EAAImD,sBAAwBnD,EAAIyB,aAAc,CACrF,IAAMmI,EAAOd,EAAMhL,IAAI,iBAEvB8L,EAAK9F,SAAWvD,IAAAA,WAAeC,MAAM,mDACrCoJ,EAAK3J,MAAMS,UAAW,CACxB,CACF,KAEA6I,EAAAA,EAAAA,QAAOM,IAAAA,UAAyB,QAAQ,SAAU1C,GAChD,IAAMnH,EAAML,KAAKM,MAAM6J,MACvBtC,GAAgBL,EAAMnH,EAAKA,EAAIkD,sBAAuBI,IAAK,gBAC3DkE,GAAgBL,EAAMnH,EAAKA,EAAImD,mBAAoBG,IAAK,oBAC1D,KAEAoG,EAAAA,EAAAA,UAASK,IAAAA,UAAoB,eAAe,SAAUC,GAAmB,QAAAC,EAAA1K,UAAAkF,OAANyF,EAAI,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,EAAA,GAAA7K,UAAA6K,GACrE,GAAIF,EAAKzF,OAAS,GAAKyF,EAAK,aAAcd,IAAK,CAC7C,IAAMpJ,EAAMkK,EAAK,GACjB,GAAIlK,EAAIyB,eAAkBzB,EAAImD,qBAAuBnD,EAAIkD,uBAA0BlD,EAAI6F,qCAAsC,CAC3H,IAAM/B,EAAWS,IAASvE,EAAI8D,YAAc,IAE5C,OACE1D,EAAA,MAAIC,UAAWmC,IAAU,UAAW,CAAE6H,QAASrK,EAAIuC,SAAWE,IAAkBzC,EAAIuC,UAAWN,MAAO,CAAE,WAAYjC,EAAIuC,UACtHnC,EAACqD,IAAI,CAACpD,UAAU,eAAeuC,KAAMrC,IAAAA,MAAUP,IAAIA,IAChDA,EAAIsD,QAAUI,IAAQ1D,EAAK,CAAC,EAAG,CAAE2D,UAAU,IAvL1D,SAA6B3D,GAC3B,OAAIA,EAAImD,qBAAuBnD,EAAIyB,aAC1BrB,EAAA,OAAK6E,MAAM,4BACTjF,EAAIkD,wBAA0BlD,EAAIyB,aACpCrB,EAAA,OAAK6E,MAAM,+BAEX7E,EAAAgD,IAAA,KAEX,CAgLekH,CAAoBtK,GACrBI,EAAA,MAAIC,UAAU,gBAAgBL,EAAIqC,QAElCjC,EAAA,KAAGC,UAAU,uBAAuBL,EAAI2C,iBACrCmB,GACD1D,EAAA,OAAKC,UAAU,oBACZyD,EAAS8B,KAAI,SAAC2B,GACb,IAAItE,EAAa,KACjB,GAAIsE,EAAMrE,sBACR,GAAIqE,EAAM9F,aACJ8F,EAAMlE,0BACRJ,EAAaK,IAAK,gBAAiB,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,eAEpE,KAAI+D,EAAM1B,qCAGf,OAAOzF,EAAAgD,IAAA,MAFPH,EAAaK,IAAK,cAAe,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,SAGvE,CAEF,GAAI+D,EAAMpE,mBACR,GAAIoE,EAAM9F,aACJ8F,EAAMlE,0BACRJ,EAAaK,IAAK,gBAAiB,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,eAEpE,KAAI+D,EAAM1B,qCAGf,OAAOzF,EAAAgD,IAAA,MAFPH,EAAaK,IAAK,mBAAoB,CAAErB,MAAO,CAAEsB,SAAU,OAAQC,MAAO,SAG5E,CAGF,MAAO,CACLpD,EAACqD,IAAI,CAACb,KAAMrC,IAAAA,MAAUP,IAAIuH,IACvBA,EAAMlF,OAAO,IAAEY,GAElB,IAEJ,MAKN7C,EAAA,QAAMC,UAAU,gCAxN5B,SAA0CL,GACxC,GAAIA,EAAImD,qBAAuBnD,EAAIyB,aACjC,OACErB,EAAA,WACGkD,IAAK,oBAAoB,IAAE/C,IAAAA,WAAeC,MAAM,4DAGhD,GAAIR,EAAIkD,wBAA0BlD,EAAIyB,aAC3C,OACErB,EAAA,WACGkD,IAAK,eAAe,IAAE/C,IAAAA,WAAeC,MAAM,+DAIhD,IAAM+J,EAAuBvK,EAAIuK,uBACjC,GAAIA,EAAsB,CACxB,GAAIA,EAAqBvB,wBAA0B,EAAG,CACpD,IAAMxC,EAAwB+D,EAAqB/D,wBAC7CF,EAA0BE,EAAsB/B,OAAS,EACzDiC,EAA+B6D,EAAqB7D,+BACpDD,EAAiCC,EAA6BjC,OAAS,EAEvE+F,EAAgBhE,EAAsBiE,OAAO/D,GACnD,OACEtG,EAACqD,IAAI,CAACpD,UAAU,+BAA+BuC,KAAM,MAAQ4H,EAAc,GAAGzH,MAC5E3C,EAAA,QAAMC,UAAU,sCACboG,EAAiCnD,IAAK,oBAAsBlD,EAAAgD,IAAA,MAC5DkD,EAA0BhD,IAAK,eAAiBlD,EAAAgD,IAAA,MAChDqD,GAAkCH,EAC/B/F,IAAAA,WAAeC,MAAM,+DACrBiG,EACAlG,IAAAA,WAAeC,MAAM,sEACrBD,IAAAA,WAAeC,MAAM,0EAE1BsG,IAAUyD,EAAqBG,gBAGtC,CACE,OACEtK,EAACqD,IAAI,CAACpD,UAAU,+BAA+BuC,KAAMrC,IAAAA,MAAUqE,WAAW2F,EAAsBA,EAAqBI,mBACnHvK,EAAA,QAAMC,UAAU,sCAAsCkK,EAAqB7H,SAC1EoE,IAAUyD,EAAqBG,gBAIxC,CACE,OAAOtK,EAAA,QAAMC,UAAU,gCAG7B,CAuK4DuK,CAAiC5K,IAGvF,CACE,MAAO,EAEX,CACE,OAAOgK,EAAQ1K,WAAC,EAAG4K,EAEvB,KAEAR,EAAAA,EAAAA,UAASK,IAAAA,UAAoB,gBAAgB,WAC3C,IAAMjB,EAAQ,IAAI+B,MAElB,GAAIlL,KAAKG,QACPgJ,EAAMK,IAAI,UAAW/I,EAAC8H,IAAgB,WACjC,CACL,IAAM4C,EAASnL,KAAKmD,KAAKiI,QAAO,SAAC/K,GAAG,OAAwB,OAAnBA,EAAIgF,UAAmB,IAC1DW,EAAQhG,KAAKmD,KAAKiI,QAAO,SAAC/K,GAAG,OAAwB,OAAnBA,EAAIgF,UAAmB,IAE/D8D,EAAMK,IAAI,WAAYxJ,KAAKqL,gBAAgBF,GAAS,KAEhDnF,EAAMlB,QACRqE,EAAMK,IAAI,QApKlB,SAA0BxD,GACxB,OAAOvF,EAAA,OAAKC,UAAU,YAAYsF,EAAMC,KAAI,SAAC5F,GAAG,MAAK,CAAC8B,GAAS9B,EAAK,CAAEkC,MAAM,GAAQlC,EAAI6F,sCAAuC,IAAI,IACrI,CAkK2BH,CAAiBC,GAAQ,GAEhD,CAEA,OAAOmD,CACT,GACF,G","sources":["webpack://@datlechin/flarum-tag-passwords/webpack/bootstrap","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/compat get default export","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/define property getters","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/hasOwnProperty shorthand","webpack://@datlechin/flarum-tag-passwords/webpack/runtime/make namespace object","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['forum/app']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/extend']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/models/Tag']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/Model']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/components/TagLinkButton']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@datlechin/flarum-tag-passwords/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@datlechin/flarum-tag-passwords/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/Component']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/Button']\"","webpack://@datlechin/flarum-tag-passwords/./src/forum/components/TagPasswordRequired.js","webpack://@datlechin/flarum-tag-passwords/./src/forum/components/TagGroupRequired.js","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/common/helpers/tagIcon']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['tags/common/utils/sortTags']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/textContrastClass']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/Link']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/utils/extract']\"","webpack://@datlechin/flarum-tag-passwords/./src/common/helpers/tagLabel.js","webpack://@datlechin/flarum-tag-passwords/./src/common/helpers/tagsLabel.js","webpack://@datlechin/flarum-tag-passwords/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://@datlechin/flarum-tag-passwords/./src/forum/components/TagProtectedDiscussionListItem.js","webpack://@datlechin/flarum-tag-passwords/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@datlechin/flarum-tag-passwords/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/models/Tag'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/TagLinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\n\nexport default class TagPasswordRequired extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.password = Stream('');\n    this.loading = false;\n    this.invalid = false;\n\n    this.tag = this.attrs.currentTag;\n  }\n\n  view() {\n    return (\n      <div className=\"TagPasswordRequired\">\n        <form onsubmit={this.onsubmit.bind(this)}>\n          <div className=\"Form-group\">\n            <h3>{app.translator.trans('datlechin-tag-passwords.forum.tag_password_required.title')}</h3>\n            <input className={'FormControl' + (this.invalid ? ' invalid' : '')} bidi={this.password} disabled={this.loading} />\n          </div>\n          <Button type=\"submit\" className=\"Button Button--primary\" loading={this.loading}>\n            {app.translator.trans('datlechin-tag-passwords.forum.tag_password_required.button_submit')}\n          </Button>\n        </form>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n    this.invalid = false;\n\n    app\n      .request({\n        url: app.forum.attribute('apiUrl') + '/datlechin/tag-passwords/auth',\n        method: 'POST',\n        body: {\n          data: {\n            id: this.tag.id(),\n            password: this.password,\n          },\n        },\n      })\n      .then((result) => {\n        this.tag.pushAttributes({ isUnlocked: true });\n        this.loading = false;\n        this.invalid = false;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.invalid = true;\n        this.loading = false;\n      });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\n\nexport default class TagGroupRequired extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = false;\n    this.invalid = false;\n\n    this.tag = this.attrs.currentTag;\n  }\n\n  view() {\n    return (\n      <div className=\"TagGroupRequired\">\n        <form onsubmit={this.onsubmit.bind(this)}>\n          <div className=\"Form-group\">\n            <h3>{app.translator.trans('datlechin-tag-passwords.forum.tag_group_required.title')}</h3>\n          </div>\n          <Button type=\"submit\" className=\"Button Button--primary\" loading={this.loading}>\n            {app.translator.trans('datlechin-tag-passwords.forum.tag_password_required.button_submit')}\n          </Button>\n        </form>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n    this.invalid = false;\n\n    app\n      .request({\n        url: app.forum.attribute('apiUrl') + '/datlechin/tag-passwords/auth',\n        method: 'POST',\n        body: {\n          data: {\n            id: this.tag.id(),\n          },\n        },\n      })\n      .then((result) => {\n        this.tag.pushAttributes({ isUnlocked: true });\n        this.loading = false;\n        this.invalid = false;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.invalid = true;\n        this.loading = false;\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/components/TagsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/common/helpers/tagIcon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/common/utils/sortTags'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/textContrastClass'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extract'];","import extract from 'flarum/common/utils/extract';\nimport Link from 'flarum/common/components/Link';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport tagIcon from 'flarum/tags/common/helpers/tagIcon';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default function tagLabel(tag, attrs = {}, showProtectedDisplayed = true, isNonProtectedDisplayed = true) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'TagLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n  const tagText = tag ? tag.name() : app.translator.trans('flarum-tags.lib.deleted_tag_text');\n\n  if (tag) {\n    const color = tag.color();\n    if (color) {\n      attrs.style['--tag-bg'] = color;\n      attrs.className = classList(attrs.className, 'colored', textContrastClass(color));\n    }\n\n    if (link) {\n      attrs.title = tag.description() || '';\n      attrs.href = app.route('tag', { tags: tag.slug() });\n    }\n\n    if (tag.isChild()) {\n      attrs.className += ' TagLabel--child';\n    }\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  let iconObject = null;\n  if (tag.isPasswordProtected() || tag.isGroupProtected()) {\n    if (tag.isUnlocked()) {\n      if (!isNonProtectedDisplayed) {\n        return <></>;\n      } else if (tag.isLockedIconDisplayed()) {\n        iconObject = icon('fas fa-unlock', { style: { fontSize: '13px', float: 'none' } });\n      }\n    } else if (showProtectedDisplayed) {\n      if (tag.isPasswordProtected()) {\n        iconObject = icon('fas fa-lock', { style: { fontSize: '13px', float: 'none' } });\n      } else {\n        iconObject = icon('fas fa-user-lock', { style: { fontSize: '13px', float: 'none' } });\n      }\n    } else {\n      return <></>;\n    }\n  } else if (!isNonProtectedDisplayed) {\n    return <></>;\n  }\n  return m(\n    link ? Link : 'span',\n    attrs,\n    <span className=\"TagLabel-text\">\n      {tag && tag.icon() && tagIcon(tag, { className: 'TagLabel-icon' }, { useColor: false })}\n      <span className=\"TagLabel-name\">\n        {tagText + (iconObject ? ' ' : '')}\n        {iconObject || null}\n      </span>\n    </span>\n  );\n}\n","import tagLabel from './tagLabel';\nimport sortTags from 'flarum/tags/common/utils/sortTags';\nimport classList from 'flarum/common/utils/classList';\n\nexport default function tagsLabel(tags, attrs = {}, isProtectedDisplayed = true, isNonProtectedDisplayed = true) {\n  const children = [];\n  const { link, ...otherAttrs } = attrs;\n\n  otherAttrs.className = classList('TagsLabel', otherAttrs.className);\n\n  if (tags) {\n    sortTags(tags).forEach((tag) => {\n      if (tag || tags.length === 1) {\n        children.push(tagLabel(tag, { link }, isProtectedDisplayed, isNonProtectedDisplayed));\n      }\n    });\n  } else {\n    children.push(tagLabel());\n  }\n\n  return <span {...otherAttrs}>{children}</span>;\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  for (var key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","import app from 'flarum/forum/app';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\nimport classList from 'flarum/common/utils/classList';\nimport Link from 'flarum/common/components/Link';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport avatar from 'flarum/common/helpers/avatar';\nimport icon from 'flarum/common/helpers/icon';\nimport tagsLabel from '../../common/helpers/tagsLabel';\n\nfunction getTooltipForPermission(discussion, title, tooltip, isPasswordProtected, isGroupProtected) {\n  return (\n    <Tooltip text={tooltip} position=\"bottom\">\n      <div className=\"DiscussionListItem-main\">\n        <h2 className=\"DiscussionListItem-title\">\n          {isPasswordProtected ? icon('fas fa-lock') : <></>}\n          {isGroupProtected ? icon('fas fa-user-lock') : <></>}\n          {' ' + title}\n        </h2>\n        {tagsLabel(discussion.tags(), {}, true, false)}\n        <ul class=\"DiscussionListItem-info\">\n          <li class=\"item-tags\">{tagsLabel(discussion.tags(), {}, false)}</li>\n        </ul>\n      </div>\n    </Tooltip>\n  );\n}\n\nexport default class TagProtectedDiscussionListItem extends DiscussionListItem {\n  view() {\n    const discussion = this.attrs.discussion;\n    const tags = discussion.tags();\n\n    const controls = DiscussionControls.controls(discussion, this).toArray();\n    const attrs = this.elementAttrs();\n    // Check whether admin wish to display protected discussion within the discussion list\n    if (this.attrs.params.displayProtectedTagForDiscussionList) {\n      return <div {...attrs}>{this.contentView()}</div>;\n    } else {\n      return <div></div>;\n    }\n  }\n  processCloudView(cloud) {\n    return <div className=\"TagCloud\">{cloud.map((tag) => [tagLabel(tag, tag.isProtectedTagDisplayedForTagsPage(), { link: true }), ' '])}</div>;\n  }\n\n  contentView() {\n    const discussion = this.attrs.discussion;\n    const isUnread = discussion.isUnread();\n    const isRead = discussion.isRead();\n\n    return (\n      <div className={classList('DiscussionListItem-content', 'Slidable-content', { unread: isUnread, read: isRead })}>\n        {this.authorAvatarView()}\n        {this.badgesView()}\n        {this.mainView()}\n        {this.replyCountItem()}\n      </div>\n    );\n  }\n\n  mainView() {\n    const discussion = this.attrs.discussion;\n    const jumpTo = this.getJumpTo();\n\n    const isProtectedPasswordTags = discussion.protectedPasswordTags().length > 0;\n    const isProtectedGroupPermissionTags = discussion.protectedGroupPermissionTags().length > 0;\n    if (isProtectedPasswordTags && !isProtectedGroupPermissionTags) {\n      return (\n        <Link className=\"DiscussionListItem-main\" href=\"#\">\n          {getTooltipForPermission(\n            discussion,\n            app.translator.trans('datlechin-tag-passwords.forum.discussion_list.title.password_protected'),\n            app.translator.trans('datlechin-tag-passwords.forum.discussion_list.info.password_protected'),\n            isProtectedPasswordTags,\n            isProtectedGroupPermissionTags\n          )}\n        </Link>\n      );\n    } else if (!isProtectedPasswordTags && isProtectedGroupPermissionTags) {\n      return (\n        <Link className=\"DiscussionListItem-main\" href=\"#\">\n          {getTooltipForPermission(\n            discussion,\n            app.translator.trans('datlechin-tag-passwords.forum.discussion_list.title.group_protected'),\n            app.translator.trans('datlechin-tag-passwords.forum.discussion_list.info.group_protected'),\n            isProtectedPasswordTags,\n            isProtectedGroupPermissionTags\n          )}\n        </Link>\n      );\n    } else {\n      return (\n        <Link className=\"DiscussionListItem-main\" href=\"#\">\n          {getTooltipForPermission(\n            discussion,\n            app.translator.trans('datlechin-tag-passwords.forum.discussion_list.title.multiple'),\n            app.translator.trans('datlechin-tag-passwords.forum.discussion_list.info.multiple'),\n            isProtectedPasswordTags,\n            isProtectedGroupPermissionTags\n          )}\n        </Link>\n      );\n    }\n  }\n\n  authorAvatarView() {\n    const discussion = this.attrs.discussion;\n    if (this.attrs.params.displayDiscussionAvatar) {\n      const user = discussion.user();\n      return (\n        <Tooltip\n          text={app.translator.trans('core.forum.discussion_list.started_text', { user, ago: humanTime(discussion.createdAt()) })}\n          position=\"right\"\n        >\n          <Link className=\"DiscussionListItem-author\" href={user ? app.route.user(user) : '#'}>\n            {avatar(user || null, { title: '' })}\n          </Link>\n        </Tooltip>\n      );\n    } else {\n      return (\n        <Tooltip text={app.translator.trans('core.forum.discussion_list.started_text', { ago: humanTime(discussion.createdAt()) })} position=\"right\">\n          <Link className=\"DiscussionListItem-author\" href=\"#\">\n            <span class=\"Avatar\" loading=\"lazy\">\n              {icon('fas fa-question')}\n            </span>\n          </Link>\n        </Tooltip>\n      );\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport Tag from 'flarum/tags/models/Tag';\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport TagLinkButton from 'flarum/tags/components/TagLinkButton';\nimport icon from 'flarum/common/helpers/icon';\nimport TagPasswordRequired from './components/TagPasswordRequired';\nimport TagGroupRequired from './components/TagGroupRequired';\n\nimport TagsPage from 'flarum/tags/components/TagsPage';\nimport tagIcon from 'flarum/tags/common/helpers/tagIcon';\nimport sortTags from 'flarum/tags/common/utils/sortTags';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport Link from 'flarum/common/components/Link';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport TagProtectedDiscussionListItem from './components/TagProtectedDiscussionListItem';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport tagLabel from '../common/helpers/tagLabel';\n\n/*\n * Used for finding the correct location to replace the main DiscussionList with protection section\n */\nfunction findDiscussionList(vdom, classNames, classNameIndex, replaceChild) {\n  vdom.children.forEach((child) => {\n    if (child.attrs.className && child.attrs.className.indexOf(classNames[classNameIndex]) !== -1) {\n      classNameIndex += 1;\n      if (classNameIndex == classNames.length) {\n        // Found the final contrainer that has DisussionList, this need to be replaced\n        child.children = replaceChild;\n        return; // Stop loop\n      }\n      return findDiscussionList(child, classNames, classNameIndex, replaceChild);\n    }\n  });\n}\n\nfunction amendViewForTag(vdom, tag, isProtected, lockIcon) {\n  if (isProtected) {\n    if (tag.isUnlocked()) {\n      if (tag.isLockedIconDisplayed()) {\n        vdom.children.push(icon('fas fa-unlock'));\n      }\n    } else if (tag.isProtectedTagDisplayedForSidebar()) {\n      vdom.children.push(lockIcon);\n    } else {\n      vdom.attrs.className += ' hiddenTag';\n    }\n  }\n}\n\nfunction amendTagTileHeading(tag) {\n  if (tag.isGroupProtected() && !tag.isUnlocked()) {\n    return <div class=\"TagsPageGroupProtection\"></div>;\n  } else if (tag.isPasswordProtected() && !tag.isUnlocked()) {\n    return <div class=\"TagsPagePasswordProtection\"></div>;\n  } else {\n    return <></>;\n  }\n}\n\nfunction amendTagTileLastPostedDiscussion(tag) {\n  if (tag.isGroupProtected() && !tag.isUnlocked()) {\n    return (\n      <div>\n        {icon('fas fa-user-lock')} {app.translator.trans('datlechin-tag-passwords.forum.tags_page.group_protected')}\n      </div>\n    );\n  } else if (tag.isPasswordProtected() && !tag.isUnlocked()) {\n    return (\n      <div>\n        {icon('fas fa-lock')} {app.translator.trans('datlechin-tag-passwords.forum.tags_page.password_protected')}\n      </div>\n    );\n  } else {\n    const lastPostedDiscussion = tag.lastPostedDiscussion();\n    if (lastPostedDiscussion) {\n      if (lastPostedDiscussion.numberOfProtectedTags() > 0) {\n        const protectedPasswordTags = lastPostedDiscussion.protectedPasswordTags();\n        const isProtectedPasswordTags = protectedPasswordTags.length > 0;\n        const protectedGroupPermissionTags = lastPostedDiscussion.protectedGroupPermissionTags();\n        const isProtectedGroupPermissionTags = protectedGroupPermissionTags.length > 0;\n\n        const protectedTags = protectedPasswordTags.concat(protectedGroupPermissionTags);\n        return (\n          <Link className=\"TagTile-lastPostedDiscussion\" href={'/t/' + protectedTags[0].slug}>\n            <span className=\"TagTile-lastPostedDiscussion-title\">\n              {isProtectedGroupPermissionTags ? icon('fas fa-user-lock') : <></>}\n              {isProtectedPasswordTags ? icon('fas fa-lock') : <></>}\n              {isProtectedGroupPermissionTags && isProtectedPasswordTags\n                ? app.translator.trans('datlechin-tag-passwords.forum.tags_page.discussion.multiple')\n                : isProtectedGroupPermissionTags\n                ? app.translator.trans('datlechin-tag-passwords.forum.tags_page.discussion.group_protected')\n                : app.translator.trans('datlechin-tag-passwords.forum.tags_page.discussion.password_protected')}\n            </span>\n            {humanTime(lastPostedDiscussion.lastPostedAt())}\n          </Link>\n        );\n      } else {\n        return (\n          <Link className=\"TagTile-lastPostedDiscussion\" href={app.route.discussion(lastPostedDiscussion, lastPostedDiscussion.lastPostNumber())}>\n            <span className=\"TagTile-lastPostedDiscussion-title\">{lastPostedDiscussion.title()}</span>\n            {humanTime(lastPostedDiscussion.lastPostedAt())}\n          </Link>\n        );\n      }\n    } else {\n      return <span className=\"TagTile-lastPostedDiscussion\" />;\n    }\n  }\n}\n\nfunction processDiscussionListItem(discussion, pageNum, pageSize, itemNum, params) {\n  if (discussion.numberOfProtectedTags() > 0) {\n    params.displayProtectedTagForDiscussionList = app.forum.attribute('flarum-tag-passwords.displayProtectedTagForDiscussionList');\n    params.displayDiscussionAvatar = app.forum.attribute('flarum-tag-passwords.displayDiscussionAvatar');\n    params.displayDiscussionLabel = app.forum.attribute('flarum-tag-passwords.displayDiscussionLabel');\n    return (\n      <li key={0} data-id={0} role=\"article\" aria-setsize=\"-1\" aria-posinset={pageNum * pageSize + itemNum}>\n        <TagProtectedDiscussionListItem discussion={discussion} params={params} />\n      </li>\n    );\n  } else {\n    return (\n      <li key={discussion.id()} data-id={discussion.id()} role=\"article\" aria-setsize=\"-1\" aria-posinset={pageNum * pageSize + itemNum}>\n        <DiscussionListItem discussion={discussion} params={params} />\n      </li>\n    );\n  }\n}\n\n/**\n * Used for amend the Tags Page footer of secondary tags\n * @param {*} cloud\n * @returns\n */\nfunction processCloudView(cloud) {\n  return <div className=\"TagCloud\">{cloud.map((tag) => [tagLabel(tag, { link: true }, tag.isProtectedTagDisplayedForTagsPage()), ' '])}</div>;\n}\n\nfunction extendDiscussionListView() {\n  /**\n   * @type {import('flarum/forum/states/DiscussionListState').default}\n   */\n  const state = this.attrs.state;\n\n  const params = state.getParams();\n  const isLoading = state.isInitialLoading() || state.isLoadingNext();\n\n  let loading;\n\n  if (isLoading) {\n    loading = <LoadingIndicator />;\n  } else if (state.hasNext()) {\n    loading = (\n      <Button className=\"Button\" onclick={state.loadNext.bind(state)}>\n        {app.translator.trans('core.forum.discussion_list.load_more_button')}\n      </Button>\n    );\n  }\n\n  if (state.isEmpty()) {\n    const text = app.translator.trans('core.forum.discussion_list.empty_text');\n    return (\n      <div className=\"DiscussionList\">\n        <Placeholder text={text} />\n      </div>\n    );\n  }\n\n  const pageSize = state.pageSize;\n  return (\n    <div className={classList('DiscussionList', { 'DiscussionList--searchResults': state.isSearchResults() })}>\n      <ul role=\"feed\" aria-busy={isLoading} className=\"DiscussionList-discussions\">\n        {state.getPages().map((pg, pageNum) => {\n          return pg.items.map((discussion, itemNum) => processDiscussionListItem(discussion, pageNum, pageSize, itemNum, params));\n        })}\n      </ul>\n      <div className=\"DiscussionList-loadMore\">{loading}</div>\n    </div>\n  );\n}\n\napp.initializers.add('datlechin/flarum-tag-passwords', () => {\n  Tag.prototype.isPasswordProtected = Model.attribute('isPasswordProtected');\n  Tag.prototype.isGroupProtected = Model.attribute('isGroupProtected');\n  Tag.prototype.isUnlocked = Model.attribute('isUnlocked');\n  Tag.prototype.password = Model.attribute('password');\n  Tag.prototype.isLockedIconDisplayed = Model.attribute('isLockedIconDisplayed');\n  Tag.prototype.isProtectedTagDisplayedForSidebar = Model.attribute('isProtectedTagDisplayedForSidebar');\n  Tag.prototype.isProtectedTagDisplayedForTagsPage = Model.attribute('isProtectedTagDisplayedForTagsPage');\n  Discussion.prototype.protectedPasswordTags = Model.attribute('protectedPasswordTags');\n  Discussion.prototype.protectedGroupPermissionTags = Model.attribute('protectedGroupPermissionTags');\n  Discussion.prototype.numberOfProtectedTags = Model.attribute('numberOfProtectedTags');\n\n  extend(IndexPage.prototype, 'view', function (vdom) {\n    const tag = this.currentTag();\n    if (tag && !tag.isUnlocked()) {\n      if (tag.isGroupProtected()) {\n        findDiscussionList(vdom, ['container', 'sideNavContainer', 'IndexPage-results'], 0, [TagGroupRequired.component({ currentTag: tag })]);\n      } else if (tag.isPasswordProtected()) {\n        findDiscussionList(vdom, ['container', 'sideNavContainer', 'IndexPage-results'], 0, [TagPasswordRequired.component({ currentTag: tag })]);\n      }\n    }\n  });\n\n  override(DiscussionList.prototype, 'view', extendDiscussionListView);\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    const tag = this.currentTag();\n\n    if (tag && (tag.isPasswordProtected() || tag.isGroupProtected()) && !tag.isUnlocked()) {\n      const item = items.get('newDiscussion');\n\n      item.children = app.translator.trans('core.forum.index.cannot_start_discussion_button');\n      item.attrs.disabled = true;\n    }\n  });\n\n  extend(TagLinkButton.prototype, 'view', function (vdom) {\n    const tag = this.attrs.model;\n    amendViewForTag(vdom, tag, tag.isPasswordProtected(), icon('fas fa-lock'));\n    amendViewForTag(vdom, tag, tag.isGroupProtected(), icon('fas fa-user-lock'));\n  });\n\n  override(TagsPage.prototype, 'tagTileView', function (original, ...args) {\n    if (args.length > 0 && args[0] instanceof Tag) {\n      const tag = args[0];\n      if (tag.isUnlocked() || (!tag.isGroupProtected() && !tag.isPasswordProtected()) || tag.isProtectedTagDisplayedForTagsPage()) {\n        const children = sortTags(tag.children() || []);\n\n        return (\n          <li className={classList('TagTile', { colored: tag.color() }, textContrastClass(tag.color()))} style={{ '--tag-bg': tag.color() }}>\n            <Link className=\"TagTile-info\" href={app.route.tag(tag)}>\n              {tag.icon() && tagIcon(tag, {}, { useColor: false })}\n              {amendTagTileHeading(tag)}\n              <h3 className=\"TagTile-name\">{tag.name()}</h3>\n\n              <p className=\"TagTile-description\">{tag.description()}</p>\n              {!!children && (\n                <div className=\"TagTile-children\">\n                  {children.map((child) => {\n                    let iconObject = null;\n                    if (child.isPasswordProtected()) {\n                      if (child.isUnlocked()) {\n                        if (child.isLockedIconDisplayed()) {\n                          iconObject = icon('fas fa-unlock', { style: { fontSize: '13px', float: 'none' } });\n                        }\n                      } else if (child.isProtectedTagDisplayedForTagsPage()) {\n                        iconObject = icon('fas fa-lock', { style: { fontSize: '13px', float: 'none' } });\n                      } else {\n                        return <></>;\n                      }\n                    }\n                    if (child.isGroupProtected()) {\n                      if (child.isUnlocked()) {\n                        if (child.isLockedIconDisplayed()) {\n                          iconObject = icon('fas fa-unlock', { style: { fontSize: '13px', float: 'none' } });\n                        }\n                      } else if (child.isProtectedTagDisplayedForTagsPage()) {\n                        iconObject = icon('fas fa-user-lock', { style: { fontSize: '13px', float: 'none' } });\n                      } else {\n                        return <></>;\n                      }\n                    }\n\n                    return [\n                      <Link href={app.route.tag(child)}>\n                        {child.name()} {iconObject}\n                      </Link>,\n                      ' ',\n                    ];\n                  })}\n                </div>\n              )}\n            </Link>\n\n            <span className=\"TagTile-lastPostedDiscussion\">{amendTagTileLastPostedDiscussion(tag)}</span>\n          </li>\n        );\n      } else {\n        return '';\n      }\n    } else {\n      return original(...args);\n    }\n  });\n\n  override(TagsPage.prototype, 'contentItems', function () {\n    const items = new ItemList();\n\n    if (this.loading) {\n      items.add('loading', <LoadingIndicator />);\n    } else {\n      const pinned = this.tags.filter((tag) => tag.position() !== null);\n      const cloud = this.tags.filter((tag) => tag.position() === null);\n\n      items.add('tagTiles', this.tagTileListView(pinned), 100);\n\n      if (cloud.length) {\n        items.add('cloud', processCloudView(cloud), 10);\n      }\n    }\n\n    return items;\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","TagPasswordRequired","_Component","apply","arguments","_proto","oninit","vnode","this","password","Stream","loading","invalid","tag","attrs","currentTag","view","m","className","onsubmit","app","trans","bidi","disabled","Button","type","e","_this","preventDefault","url","attribute","method","body","data","id","then","result","pushAttributes","isUnlocked","redraw","error","Component","TagGroupRequired","tagLabel","showProtectedDisplayed","isNonProtectedDisplayed","style","link","extract","tagText","name","translator","color","classList","textContrastClass","title","description","href","route","tags","slug","isChild","iconObject","isPasswordProtected","isGroupProtected","'['","isLockedIconDisplayed","icon","fontSize","float","Link","tagIcon","useColor","tagsLabel","isProtectedDisplayed","children","_attrs","otherAttrs","source","excluded","target","indexOf","_objectWithoutPropertiesLoose","_excluded","sortTags","forEach","length","push","getTooltipForPermission","discussion","tooltip","Tooltip","text","position","class","TagProtectedDiscussionListItem","_DiscussionListItem","DiscussionControls","toArray","elementAttrs","params","displayProtectedTagForDiscussionList","contentView","processCloudView","cloud","map","isProtectedTagDisplayedForTagsPage","isUnread","isRead","unread","read","authorAvatarView","badgesView","mainView","replyCountItem","isProtectedPasswordTags","getJumpTo","protectedPasswordTags","isProtectedGroupPermissionTags","protectedGroupPermissionTags","displayDiscussionAvatar","user","ago","humanTime","createdAt","avatar","DiscussionListItem","findDiscussionList","vdom","classNames","classNameIndex","replaceChild","child","amendViewForTag","isProtected","lockIcon","isProtectedTagDisplayedForSidebar","extendDiscussionListView","state","getParams","isLoading","isInitialLoading","isLoadingNext","LoadingIndicator","hasNext","onclick","loadNext","isEmpty","Placeholder","pageSize","isSearchResults","role","getPages","pg","pageNum","items","itemNum","numberOfProtectedTags","displayDiscussionLabel","processDiscussionListItem","add","Tag","Model","Discussion","extend","IndexPage","component","override","DiscussionList","item","TagLinkButton","model","TagsPage","original","_len","args","Array","_key","colored","amendTagTileHeading","lastPostedDiscussion","protectedTags","concat","lastPostedAt","lastPostNumber","amendTagTileLastPostedDiscussion","ItemList","pinned","filter","tagTileListView"],"sourceRoot":""}