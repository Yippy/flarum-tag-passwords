(()=>{var t={n:o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return t.d(r,{a:r}),r},d:(o,r)=>{for(var e in r)t.o(r,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:r[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const r=flarum.core.compat["admin/app"];var e=t.n(r);const a=flarum.core.compat["common/extend"],s=flarum.core.compat["tags/models/Tag"];var n=t.n(s);const d=flarum.core.compat["common/Model"];var i=t.n(d);const p=flarum.core.compat["tags/components/EditTagModal"];var c=t.n(p);const l=flarum.core.compat["utils/Stream"];var u=t.n(l);const g=flarum.core.compat["common/helpers/icon"];var h=t.n(g);const f=flarum.core.compat["common/components/Button"];var _=t.n(f);const b=flarum.core.compat["common/components/Dropdown"];var w=t.n(b);const y=flarum.core.compat["common/models/Group"];var P=t.n(y);e().initializers.add("datlechin/flarum-tag-passwords",(function(){e().extensionData.for("datlechin-tag-passwords").registerSetting({setting:"flarum-tag-passwords.display_unlock_icon",label:e().translator.trans("datlechin-tag-passwords.admin.setting.display_unlock_icon"),type:"switch"}).registerSetting({setting:"flarum-tag-passwords.display_protected_tag_from_sidebar",label:e().translator.trans("datlechin-tag-passwords.admin.setting.display_protected_tag_from_sidebar"),type:"switch"}).registerSetting({setting:"flarum-tag-passwords.display_protected_tag_from_tags_page",label:e().translator.trans("datlechin-tag-passwords.admin.setting.display_protected_tag_from_tags_page"),type:"switch"}),n().prototype.isPasswordProtected=i().attribute("isPasswordProtected"),n().prototype.isGroupProtected=i().attribute("isGroupProtected"),n().prototype.password=i().attribute("password"),n().prototype.protectedGroupIds=i().attribute("protectedGroupIds"),(0,a.extend)(c().prototype,"oninit",(function(){this.isPasswordProtected=u()(this.tag.password()||!1),this.password=u()(this.tag.password()||""),this.isGroupProtected=u()(this.tag.protectedGroupIds()||!1),this.protectedGroupIds=null!=this.tag.protectedGroupIds()?this.tag.protectedGroupIds().split(","):[]})),(0,a.extend)(c().prototype,"fields",(function(t){var o=this;t.add("protectedType",m("div",{className:"Form-group"},m("label",null,e().translator.trans("datlechin-tag-passwords.admin.edit_tag.protected_label")),m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:this.isPasswordProtected}),e().translator.trans("datlechin-tag-passwords.admin.edit_tag.password_protected_label")),m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:this.isGroupProtected}),e().translator.trans("datlechin-tag-passwords.admin.edit_tag.group_protected_label")),this.isPasswordProtected()&&!this.isGroupProtected()?m("input",{className:"FormControl",bidi:this.password,placeholder:e().translator.trans("datlechin-tag-passwords.admin.edit_tag.password_placeholder_label")}):"",this.isGroupProtected()&&!this.isPasswordProtected()?m("table.GroupListTable",m("tbody",[null===this.protectedGroupIds?m("tr",m("td",LoadingIndicator.component())):this.protectedGroupIds.map((function(t,r){return m("tr",[m("td",e().store.all("groups").filter((function(o){return o.id()==Number(t)})).map((function(t){return t.namePlural()}))),m("td",m("button.Button.Button--danger",{onclick:function(t){t.preventDefault(),o.protectedGroupIds.splice(r,1),m.redraw()}},h()("fas fa-times")))])})),m("tr",m("td",{colspan:5},w().component({label:e().translator.trans("datlechin-tag-passwords.admin.edit_tag.select_group"),buttonClassName:"Button"},e().store.all("groups").filter((function(t){if(t.id()===P().MEMBER_ID||t.id()===P().GUEST_ID)return!1;var r=!1;return Array.isArray(o.protectedGroupIds)&&o.protectedGroupIds.forEach((function(o){o==t.id()&&(r=!0)})),!r})).map((function(t){return _().component({onclick:function(){o.protectedGroupIds.push(t.id()),m.redraw()}},t.namePlural())})))))])):"")))})),(0,a.extend)(c().prototype,"submitData",(function(t){t.password=this.isPasswordProtected()?this.password():null,t.protected_group_ids=this.isGroupProtected()&&this.protectedGroupIds.length>0?this.protectedGroupIds.toString():null}))}))})(),module.exports=o})();
//# sourceMappingURL=admin.js.map